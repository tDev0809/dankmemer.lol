(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{376:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),o=a(8),i=a(14),c=a(5),d=a(1);const r=10;t.default=Object(o.b)(e=>e.login)(function(e){let[t,a]=Object(l.useState)([]),[o,s]=Object(l.useState)(0),[u,p]=Object(l.useState)(!1),[b,v]=Object(l.useState)(null);const m=window.location.pathname.split("/")[2];return Object(l.useEffect)(()=>{(async()=>{i(`/api/feedback/posts/${m}?from=${o}&amount=${r}`).then(({data:e})=>{a([...t,...e.posts]),p(e.all)})})()},[o]),Object(l.useEffect)(()=>{i("/api/feedback/categories").then(e=>{v(e.data)})},[]),b&&!b.includes(m)&&window.location.replace("/feedback"),n.a.createElement("div",{style:{width:"70vw",margin:"0 auto"}},n.a.createElement(d.b,{to:"/feedback/new"},"New Post"),t.map(l=>n.a.createElement("div",{key:l._id},n.a.createElement("div",{onClick:()=>(async l=>{if(!e.loggedIn)return c.b.dark(n.a.createElement("p",null,n.a.createElement("svg",{viewBox:"0 0 16 16",fill:"currentColor",style:{display:"inline-block",verticalAlign:"middle",width:"20px",height:"20px",boxSizing:"border-box",margin:"10px",color:"rgb(233, 76, 88)"}},n.a.createElement("path",{fillRule:"evenodd",d:"M11.46.146A.5.5 0 0 0 11.107 0H4.893a.5.5 0 0 0-.353.146L.146 4.54A.5.5 0 0 0 0 4.893v6.214a.5.5 0 0 0 .146.353l4.394 4.394a.5.5 0 0 0 .353.146h6.214a.5.5 0 0 0 .353-.146l4.394-4.394a.5.5 0 0 0 .146-.353V4.893a.5.5 0 0 0-.146-.353L11.46.146zm-6.106 4.5a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})),n.a.createElement("span",{style:{display:"inline-block",verticalAlign:"middle"}},"You need to be logged in!")),{position:"top-right",autoClose:1e4,hideProgressBar:!0,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"upvoteState"});i.patch(`/api/feedback/post/upvote/${l}`).then(({data:e})=>{const n=t.find(e=>e._id===l);n.upvotes+=e.upvote,n.upvoted=1==e.upvote,a([...t])})})(l._id)},l.upvoted?"[UNDO UPVOTE]":"[UPVOTE]"),n.a.createElement(d.b,{to:`/feedback/p/${l._id}`},n.a.createElement("div",null,l.upvotes," upvotes"),n.a.createElement("div",null,"by ",l.author.username),n.a.createElement("div",null,l.title),n.a.createElement("div",null,l.description),n.a.createElement("div",null,new Date(l.createdAt).toLocaleString()),n.a.createElement("br",null)))),!u&&n.a.createElement("div",{onClick:async()=>{s(o+r)}},"Load More Posts"),n.a.createElement(c.a,null))})}}]);