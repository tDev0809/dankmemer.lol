(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{376:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(8),o=a(14),i=a(5),s=a(1);const d=10;t.default=Object(l.b)(e=>e.login)(function(e){let[t,a]=Object(n.useState)([]),[l,r]=Object(n.useState)(0),[u,b]=Object(n.useState)(!1),[m,p]=Object(n.useState)(null);const E=window.location.pathname.split("/")[2];return Object(n.useEffect)(()=>{(async()=>{o(`/api/feedback/posts/${E}?from=${l}&amount=${d}`).then(({data:e})=>{a([...t,...e.posts]),b(e.all)})})()},[l]),Object(n.useEffect)(()=>{o("/api/feedback/categories").then(e=>{p(e.data)})},[]),m&&!m.includes(E)&&window.location.replace("/feedback"),c.a.createElement("div",{style:{width:"70vw",margin:"0 auto"}},c.a.createElement(s.b,{to:"/feedback/new"},"New Post"),t.map(e=>c.a.createElement("div",{key:e._id},c.a.createElement("div",{onClick:()=>(async e=>{console.log(e)})(e._id)},"[UPVOTE]"),c.a.createElement(s.b,{to:`/feedback/p/${e._id}`},c.a.createElement("div",null,e.upvotes," upvotes"),c.a.createElement("div",null,"by ",e.author.username),c.a.createElement("div",null,e.title),c.a.createElement("div",null,e.description),c.a.createElement("div",null,new Date(e.createdAt).toLocaleString()),c.a.createElement("br",null)))),!u&&c.a.createElement("div",{onClick:async()=>{r(l+d)}},"Load More Posts"),c.a.createElement(i.a,null))})}}]);